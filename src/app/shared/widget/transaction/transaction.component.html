<div class="table-responsive mb-0">
  <table class="table table-centered table-nowrap">
    <thead class="table-light">
      <tr>
        <th style="width: 20px">
          <div class="form-check font-size-16 align-middle">
            <input class="form-check-input" type="checkbox" id="transactionCheck01" />
            <label class="form-check-label" for="transactionCheck01"></label>
          </div>
        </th>
        <th class="align-middle">Order ID</th>
        <th class="align-middle">Precio Estimado</th>
        <th class="align-middle">Fecha de Creación</th>
        <th class="align-middle">TRM</th>
        <th class="align-middle">Total</th>
        <!-- <th class="align-middle">Payment Status</th> -->
        <!-- <th class="align-middle">Payment Method</th> -->
        <th class="align-middle">Opciónes</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of transactions">
        <td>
          <div class="form-check font-size-16">
            <input class="form-check-input" type="checkbox" id="transactionCheck{{ data.index }}" />
            <label class="form-check-label" for="transactionCheck{{ data.index }}"></label>
          </div>
        </td>
        <td>
          <a href="javascript: void(0);" class="text-body fw-bold">{{
            data.id
          }}</a>
        </td>
        <td>{{ data.estimated_value?.usd ? data.estimated_value.usd : "n/a" }}</td>
        <td>
          {{ data.created_at ? (data.created_at | date: "medium") : "n/a" }}
        </td>
        <td>{{ data.trm ? data.trm : "n/a" }}</td>

        <td>{{ data.is_shipping_locker ? data.is_shipping_locker : "n/a" }}</td>
        <!-- <td>
          <span class="badge badge-pill badge-soft-success font-size-11" [ngClass]=" { 'badge-soft-danger': data.status === 'Chargeback',
                        'badge-soft-warning':data.status === 'Refund' }">{{data.status}}</span>
        </td> -->
        <!-- <td>
          <i :class="`fab ${data.payment[0]} mr-1`"></i>
          {{data.payment[1]}}
        </td> -->
        <td>
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-primary btn-sm btn-rounded" (click)="openModal(data, content)">
            Editar
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <ng-template #content role="document" let-modal>
    <div class="modal-header ">
      <h5 class="modal-title mt-0">Detalles de la orden</h5>
      <button type="button" class="btn-close" aria-hidden="true" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">

      <div class="container">
        <div class="row">
          <div class="col-7">

            <div class="h4">
              # 000{{productSelected?.id}}
            </div>

            <div class="h5">
              {{productSelected?.created_at | date }}
            </div>
            <div class="h5">
              TRM cotización: {{trm}}
            </div>

          </div>
          <div class="col-5">

            <div class="row mt-2">
              <div class="col-6 h5 d-flex ">
                Valor Total :
              </div>
              <div class="col-6 h5 d-flex">
                <div>
                  USD {{productSelected?.total_value}} / COP
                  {{productSelected?.total_value * trm}}
                </div>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-6 h5 d-flex  c-gray">
                Envío a casillero:
              </div>
              <div class="col-6 h5 d-flex c-gray">
                <div>
                  USD {{productSelected?.locker_value}} / COP {{productSelected.locker_value * trm}} </div>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-6 h5 d-flex  c-gray">
                Envío a Destino:
              </div>
              <div class="col-6 h5 d-flex c-gray">
                <div>
                  USD 0 / COP 0 </div>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-6 h5 d-flex  c-gray">
                Costo del Seguro:
              </div>
              <div class="col-6 h5 d-flex c-gray">
                <div>
                  USD 0 / COP 0 </div>
              </div>
            </div>


            <div class="row mt-2">
              <div class="col-6 h5 d-flex  c-gray">
                Valor asegurado:
              </div>
              <div class="col-6 h5 d-flex c-gray">
                <div>
                  USD 0 / COP 0 </div>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-6 h5 d-flex  c-gray">
                Descuento:
              </div>
              <div class="col-6 h5 d-flex c-gray">
                <div>
                  USD 0 / COP 0 </div>
              </div>
            </div>



          </div>
        </div>
      </div>
      <hr>
      <div class="table-responsive">

        <div class="container" *ngFor="let item of productSelected?.products">
          <div class="row">
            
            <div class="col-3 d-flex justify-content-center">
              <img [src]="item.image"
                (error)="$event.src = 'https://bulma.io/images/placeholders/96x96.png'" class="avatar" />
            </div>
            <div class="col-4">
              <div>
                <a [href]="item.link" target="blank">
                  <h5 class="text-truncate h5">{{ item.name }}</h5>
                </a>
              </div>
              <div>
                {{item.description}}
                
              </div>
              <div class="mt-2">
                {{item.aditional_info}}
              </div>
              <div class="form-group mt-2 h5">
                <label for="exampleFormControlTextarea1">Observaciones de Cotización</label>
                <textarea class="form-control" id="exampleFormControlTextarea1"
                  cols="30" rows="5"
                  placeholder="Escribenos la información adicional de producto como talla, color, etc."></textarea>
              </div>


              <div class="form-group mt-2 h5">
                <label for="exampleFormControlTextarea1">Observaciones del cliente</label>
                <textarea class="form-control" id="exampleFormControlTextarea1" cols="30" rows="5"
                  placeholder="Escribenos la información adicional de producto como talla, color, etc."></textarea>
              </div>
              <div class="mt-2 h5">
                Cantidad: {{item.quantity}}
              </div>
            </div>
            <div class="col-5">

              <div class="row">
                <div class="col-6">
                  <div class="form-group">
                    <label for="exampleInputEmail1" class="text-truncate h5">Valor Articulo USD *</label>
                    <input type="text" class="form-control" placeholder="Valor en USD">
                  </div>
                </div>
                <div class="col-3">
                  <div class="form-group">
                    <label for="exampleInputEmail1" class="text-truncate h5">% Desc</label>
                    <input type="text" class="form-control" placeholder="% descuento">
                  </div>
                </div>
                <div class="col-3">
                  <div class="form-group">
                    <label for="exampleInputEmail1" class="text-truncate h5">Tax</label>
                    <input type="text" class="form-control" placeholder="Tax">
                  </div>
                </div>
              </div>

              <div class="row mt-4">
                <div class="form-group col-12">
                  <label for="exampleInputEmail1" class="text-truncate h5">Envio Origen</label>
                  <input type="text" class="form-control" placeholder="Envio origen">
                </div>
              </div>

              <div class="row mt-4">

                <div class="col-6">
                  <label for="form-group exampleInputEmail1" class="text-truncate h5">Peso(Libras) *</label>
                  <input type="text" class="form-control" placeholder="Peso en libras">
                </div>
                <div class="col-6">
                  <label for="form-group exampleInputEmail1" class="text-truncate h5">Valor Envio fijo </label>
                  <input type="text" class="form-control" placeholder="Valor envio fijo">
                </div>
              </div>


              
              <div class="row mt-4">

                <div class="col-6 text-truncate h5">
                  SUB-TOTAL USD 200 / COP 300
                </div>
                <div class="col-6">
                  <div class="form-check form-switch text-truncate h5">
                    <label for="form-group">Envio Gratis</label>
                    <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                      >
                  </div>
                </div>
              </div>


            </div>

            
            <!-- <div class="col-2 d-flex justify-content-center align-items-center">
              <img [src]="item.image" alt class="avatar" />
            </div>
            <div class="col-6">
              <div>
                <a [href]="item.link" target="blank">
                  <h5 class="text-truncate h5">{{ item.name }}</h5>
                </a>
              </div>
              <div>
                {{item.description}}
              </div>
              <div class="mt-2">
                {{item.aditional_info}}
              </div>
              <div class="mt-2 h5">
                Cantidad: {{item.quantity}}
              </div>
            </div>
            <div class="col-4">

              <div class="row">
                <div class="col-12 h5">
                  USD {{(item.price.usd + item.price.price_locker.usd + item.price.tax) * item.quantity }} / COP
                  {{((item.price.usd + item.price.price_locker.usd + item.price.tax) * item.quantity)*trm}}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-6 h5">
                  Precio
                </div>
                <div class="col-6 h5">
                  USD
                </div>
              </div>

              <div class="row mt-2">
                <div class="col-6 h5 d-flex align-items-center">
                  Artículo:
                </div>
                <div class="col-6 h5 d-flex">
                  <div>
                    <input type="number" class="form-control" [min]="0" [(ngModel)]="item.price.usd"
                      (ngModelChange)="calcTotalProducts()">
                  </div>
                </div>
              </div>
              <div class="row mt-2">
                <div class="col-6 h5">
                  Envío a casillero gratis
                </div>
                <div class="col-6">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                      (click)="item.free_shipping_locker =!item.free_shipping_locker; item.price.price_locker.usd = 0 ;calcTotalProducts()"
                      [checked]="item.free_shipping_locker">
                  </div>
                </div>
              </div>
              <div class="row mt-2">
                <div class="col-6 h5 d-flex align-items-center">
                  Envío al casillero :
                </div>
                <div class="col-6 h5 d-flex">
                  <div>
                    <input [disabled]="item.free_shipping_locker" type="number" class="form-control" [min]="0"
                      [(ngModel)]="item.price.price_locker.usd" (ngModelChange)="calcTotalProducts()">
                  </div>
                </div>
              </div>

              <div class="row mt-2">
                <div class="col-6 h5 d-flex align-items-center">
                  Tax :
                </div>
                <div class="col-6 h5 d-flex">
                  <div>
                    <input type="number" class="form-control" [min]="0" [(ngModel)]="item.price.tax"
                      (ngModelChange)="calcTotalProducts()">
                  </div>
                </div>
              </div>



            </div> -->
          </div>
          <hr>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="modal.close('Close click')">
        Cancelar
      </button>
      <button class="btn btn-primary" (click)="sendQuotation()">Aprobar</button>
    </div>
  </ng-template>
</div>
<!-- end table -->
