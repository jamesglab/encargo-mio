<div class="table-responsive mb-0">
  <table class="table table-centered table-nowrap">
    <thead class="table-light">
      <tr>
        <th style="width: 20px">
          <div class="form-check font-size-16 align-middle">
            <input class="form-check-input" type="checkbox" id="transactionCheck01" />
            <label class="form-check-label" for="transactionCheck01"></label>
          </div>
        </th>
        <th class="align-middle">Order ID</th>
        <th class="align-middle">Precio Estimado</th>
        <th class="align-middle">Fecha de Creación</th>
        <th class="align-middle">TRM</th>
        <th class="align-middle">Total</th>
        <!-- <th class="align-middle">Payment Status</th> -->
        <!-- <th class="align-middle">Payment Method</th> -->
        <th class="align-middle">Opciónes</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of transactions">
        <td>
          <div class="form-check font-size-16">
            <input class="form-check-input" type="checkbox" id="transactionCheck{{ data.index }}" />
            <label class="form-check-label" for="transactionCheck{{ data.index }}"></label>
          </div>
        </td>
        <td>
          <a href="javascript: void(0);" class="text-body fw-bold">{{
            data.id
          }}</a>
        </td>
        <td>{{ data.estimated_value?.usd ? data.estimated_value.usd : "n/a" }}</td>
        <td>
          {{ data.created_at ? (data.created_at | date: "medium") : "n/a" }}
        </td>
        <td>{{ data.trm ? data.trm : "n/a" }}</td>

        <td>{{ data.is_shipping_locker ? data.is_shipping_locker : "n/a" }}</td>
        <!-- <td>
          <span class="badge badge-pill badge-soft-success font-size-11" [ngClass]=" { 'badge-soft-danger': data.status === 'Chargeback',
                        'badge-soft-warning':data.status === 'Refund' }">{{data.status}}</span>
        </td> -->
        <!-- <td>
          <i :class="`fab ${data.payment[0]} mr-1`"></i>
          {{data.payment[1]}}
        </td> -->
        <td>
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-primary btn-sm btn-rounded" (click)="openModal(data, content)">
            Editar
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <ng-template #content role="document" let-modal>
    <div class="modal-header ">
      <h5 class="modal-title mt-0">Detalles de la orden</h5>
      <button type="button" class="btn-close" aria-hidden="true" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">

      <div class="container">
        <div class="row">
          <div class="col-7">

            <div class="h4">
              # 000{{productSelected.order_service.id}}
            </div>

            <div class="h5">
              {{productSelected.order_service.created_at | date }}
            </div>
            <div class="h5">
              TRM cotización: {{trm}}
            </div>

          </div>
          <div class="col-5">

            <div class="row mt-2">
              <div class="col-6 h5 d-flex ">
                Valor Total :
              </div>
              <div class="col-6 h5 d-flex">
                <div>
                  USD 228 / COP 80000
                </div>
              </div>
            </div>



            <div class="row mt-2">
              <div class="col-6 h5 d-flex  c-gray">
                Envío a casillero: 
              </div>
              <div class="col-6 h5 d-flex c-gray">
                <div>
                  USD 0 / COP 0 </div>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-6 h5 d-flex  c-gray">
                Envío a Destino:
              </div>
              <div class="col-6 h5 d-flex c-gray">
                <div>
                  USD 0 / COP 0 </div>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-6 h5 d-flex  c-gray">
                Costo del Seguro:
              </div>
              <div class="col-6 h5 d-flex c-gray">
                <div>
                  USD 0 / COP 0 </div>
              </div>
            </div>


            <div class="row mt-2">
              <div class="col-6 h5 d-flex  c-gray">
                Valor asegurado:
              </div>
              <div class="col-6 h5 d-flex c-gray">
                <div>
                  USD 0 / COP 0 </div>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-6 h5 d-flex  c-gray">
                Descuento:
              </div>
              <div class="col-6 h5 d-flex c-gray">
                <div>
                  USD 0 / COP 0 </div>
              </div>
            </div>



          </div>
        </div>
      </div>


      <!-- <p class="mb-2">
        Product id:
        <span class="text-primary">#{{ productSelected.order_service.id }}</span>
      </p>
      <p class="mb-2">
        Usuario:
        <span class="text-secondary">{{
          productSelected.order_service.user.name
        }}</span>
      </p>
      <p class="mb-4">
        Numero de contacto:
        <span class="text-secondary">{{
          productSelected.order_service.user.phone
        }}</span>
      </p> -->

      <!-- <ul class="nav nav-pills">
        <li class="nav-item">
          <a class="nav-link" [ngClass]="{'active':tabProducts == 1 }" (click)="tabProducts = 1">Precio de producto</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [ngClass]="{'active':tabProducts == 2}" (click)="tabProducts = 2">Envío a casillero</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [ngClass]="{'active':tabProducts == 3}" (click)="tabProducts = 3">Envío a casa</a>
        </li>
      </ul> -->
      <hr>
      <div class="table-responsive">

        <div class="container" *ngFor="let item of productSelected.order_service.products">

          <div class="row">
            <div class="col-2 d-flex justify-content-center align-items-center">
              <img [src]="item.image" alt class="avatar" />
            </div>
            <div class="col-6">
              <div>
                <a [href]="item.link" target="blank">
                  <h5 class="text-truncate h5">{{ item.name }}</h5>
                </a>
              </div>
              <div>
                {{item.description}}
              </div>
              <div class="mt-2">
                {{item.aditional_info}}
              </div>
              <div class="mt-2 h5">
                Cantidad: {{item.quantity}}
              </div>
            </div>
            <div class="col-4">

              <div class="row">
                <div class="col-12 h5">
                  USD {{item.price.usd + item.price.price_locker.usd + item.price.tax}} / COP
                  {{(item.price.usd + item.price.price_locker.usd + item.price.tax) * trm}}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-6 h5">
                  Precio
                </div>
                <div class="col-6 h5">
                  USD
                </div>
              </div>

              <div class="row mt-2">
                <div class="col-6 h5 d-flex align-items-center">
                  Artículo:
                </div>
                <div class="col-6 h5 d-flex">
                  <div>
                    <input type="number" class="form-control" [min]="0" [(ngModel)]="item.price.usd"
                      (ngModelChange)="calcTotalProducts()">
                  </div>
                </div>
              </div>
              <div class="row mt-2">
                <div class="col-6 h5">
                  Envío a casillero gratis
                </div>
                <div class="col-6">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked"
                      (click)="item.free_shipping_locker =!item.free_shipping_locker; item.price.price_locker.usd = 0 "
                      [checked]="item.free_shipping_locker">
                  </div>
                </div>
              </div>
              <div class="row mt-2">
                <div class="col-6 h5 d-flex align-items-center">
                  Envío al casillero :
                </div>
                <div class="col-6 h5 d-flex">
                  <div>
                    <input [disabled]="item.free_shipping_locker" type="number" class="form-control" [min]="0"
                      [(ngModel)]="item.price.price_locker.usd" (ngModelChange)="calcTotalProducts()">
                  </div>
                </div>
              </div>

              <div class="row mt-2">
                <div class="col-6 h5 d-flex align-items-center">
                  Tax :
                </div>
                <div class="col-6 h5 d-flex">
                  <div>
                    <input type="number" class="form-control" [min]="0" [(ngModel)]="item.price.tax"
                      (ngModelChange)="calcTotalProducts()">
                  </div>
                </div>
              </div>



            </div>
          </div>
          <hr>
        </div>




        <!-- <table class="table table-centered table-nowrap">
          <thead>
            <tr>
              <th scope="col">Imagen</th>
              <th scope="col">Nombre del Producto</th>
              <th scope="col">Price</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of productSelected.order_service.products">
              <th scope="row">
                <div>
                  <img [src]="item.image" alt class="avatar-lg" />
                </div>
              </th>
              <td>
                <div style="max-width: 9rem">
                  <a [href]="item.link" target="blank">
                    <h5 class="text-truncate font-size-14">{{ item.name }}</h5>
                  </a>
                  <input type="number" class="form-control ng-valid ng-dirty ng-touched" [min]="0"
                    [(ngModel)]="item.price.usd" (ngModelChange)="calcTotalProducts()" />
                  <p class="text-muted mb-0">
                    $ {{ item.price.usd }} x {{ item.quantity }}
                  </p>
                </div>
              </td>
              <td>$ {{ (item.quantity * item.price.usd).toFixed(2) }}</td>
            </tr>
            <tr>
              <td colspan="2">
                <h6 class="m-0 text-end">Sub Total:</h6>
              </td>
              <td>{{ subTotalPrice }}</td>
            </tr>
            <tr>
              <td colspan="2">
                <h6 class="m-0 text-end">TRM:</h6>
              </td>
              <td>{{ trm }}</td>
            </tr>
            <tr>
              <td colspan="2">
                <h6 class="m-0 text-end">Total:</h6>
              </td>
              <td>$ USD {{ productSelected.order_service.estimated_value.usd.toFixed(2) }}/ COP
                {{ (productSelected.order_service.estimated_value.usd * trm).toFixed(2) }}</td>
            </tr>
          </tbody>
        </table> -->
        <!-- <div class="row m-2">
          <div class="col"></div>
          <div class="col">
            <div class="d-flex">
              <div class="title">
                Sub Total :
              </div>
              <div>
                USD {{ subTotalPrice }}
              </div>
            </div>

          </div>
        </div> -->
      </div>



    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="modal.close('Close click')">
        Cancelar
      </button>
      <button class="btn btn-primary" (click)="sendQuotation()">Aprobar</button>
    </div>
  </ng-template>
</div>
<!-- end table -->
