<div class="table-responsive mb-0">
  <table class="table table-centered table-nowrap">
    <thead class="table-light">
      <tr>
        <th style="width: 20px">
          <div class="form-check font-size-16 align-middle">
            <input
              class="form-check-input"
              type="checkbox"
              id="transactionCheck01"
            />
            <label class="form-check-label" for="transactionCheck01"></label>
          </div>
        </th>
        <th class="align-middle">Order ID</th>
        <th class="align-middle">Precio Estimado</th>
        <th class="align-middle">Fecha de Creación</th>
        <th class="align-middle">TRM</th>
        <th class="align-middle">Total</th>
        <!-- <th class="align-middle">Payment Status</th> -->
        <!-- <th class="align-middle">Payment Method</th> -->
        <th class="align-middle">Oprciónes</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of transactions">
        <td>
          <div class="form-check font-size-16">
            <input
              class="form-check-input"
              type="checkbox"
              id="transactionCheck{{ data.index }}"
            />
            <label
              class="form-check-label"
              for="transactionCheck{{ data.index }}"
            ></label>
          </div>
        </td>
        <td>
          <a href="javascript: void(0);" class="text-body fw-bold">{{
            data.id
          }}</a>
        </td>
        <td>{{ data.estimated_value ? data.estimated_value : "n/a" }}</td>
        <td>
          {{ data.created_at ? (data.created_at | date: "medium") : "n/a" }}
        </td>
        <td>{{ data.trm ? data.trm : "n/a" }}</td>

        <td>{{ data.is_shipping_locker ? data.is_shipping_locker : "n/a" }}</td>
        <!-- <td>
          <span class="badge badge-pill badge-soft-success font-size-11" [ngClass]=" { 'badge-soft-danger': data.status === 'Chargeback',
                        'badge-soft-warning':data.status === 'Refund' }">{{data.status}}</span>
        </td> -->
        <!-- <td>
          <i :class="`fab ${data.payment[0]} mr-1`"></i>
          {{data.payment[1]}}
        </td> -->
        <td>
          <!-- Button trigger modal -->
          <button
            type="button"
            class="btn btn-primary btn-sm btn-rounded"
            (click)="openModal(data, content)"
          >
            View Details
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <ng-template #content role="document" let-modal>
    <div class="modal-header">
      <h5 class="modal-title mt-0">Detalles de la orden</h5>
      <button
        type="button"
        class="btn-close"
        aria-hidden="true"
        (click)="modal.dismiss('Cross click')"
      ></button>
    </div>
    <div class="modal-body">
      <p class="mb-2">
        Product id:
        <span class="text-primary"
          >#{{ productSelected.order_service.id }}</span
        >
      </p>
      <p class="mb-2">
        Usuario:
        <span class="text-secondary">{{
          productSelected.order_service.user.name
        }}</span>
      </p>
      <p class="mb-4">
        Numero de contacto:
        <span class="text-secondary">{{
          productSelected.order_service.user.phone
        }}</span>
      </p>
      <div class="table-responsive">
        <table class="table table-centered table-nowrap">
          <thead>
            <tr>
              <th scope="col">Imagen</th>
              <th scope="col">Nombre del Producto</th>
              <th scope="col">Price</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of productSelected.order_service.products">
              <th scope="row">
                <div>
                  <img [src]="item.image" alt class="avatar-sm" />
                </div>
              </th>
              <td>
                <div style="max-width: 9rem">
                  <a [href]="item.link" target="blank">
                    <h5 class="text-truncate font-size-14">{{ item.name }}</h5>
                  </a>
                  <input
                    type="number"
                    class="form-control ng-valid ng-dirty ng-touched"
                    [min]="0"
                    [(ngModel)]="item.price"
                    (ngModelChange)="calcTotalProducts()"
                  />
                  <p class="text-muted mb-0">
                    $ {{ item.price }} x {{ item.quantity }}
                  </p>
                </div>
              </td>
              <td>$ {{ item.quantity * item.price }}</td>
            </tr>
            <tr>
              <td colspan="2">
                <h6 class="m-0 text-end">Sub Total:</h6>
              </td>
              <td>{{ subTotalPrice }}</td>
            </tr>
            <tr>
              <td colspan="2">
                <h6 class="m-0 text-end">TRM:</h6>
              </td>
              <td>{{ trm }}</td>
            </tr>
            <tr>
              <td colspan="2">
                <h6 class="m-0 text-end">Total:</h6>
              </td>
              <td>$ {{ productSelected.order_service.estimated_value }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="modal.close('Close click')">
        Cancelar
      </button>
      <button class="btn btn-primary" (click)="sendQuotation()">Aprobar</button>
    </div>
  </ng-template>
</div>
<!-- end table -->
